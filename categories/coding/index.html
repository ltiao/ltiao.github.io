<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="All about coding">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Posts about coding | Louis Tiao</title>
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS for tag coding (en)" href="../coding.xml">
<link rel="canonical" href="http://louistiao.me/categories/coding/">
<link rel="icon" href="../../favicon_256x256.ico" sizes="256x256">
<link rel="icon" href="../../favicon_32x32.ico" sizes="32x32">
<link rel="icon" href="../../favicon_16x16.ico" sizes="16x16">
<link rel="next" href="index-3.html" type="text/html">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'center' to center equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><!--

    /\\\\\\\\\\\\\\\  /\\\\\\\\\\\     /\\\\\\\\\          /\\\\\              
    \///////\\\/////  \/////\\\///    /\\\\\\\\\\\\\      /\\\///\\\           
           \/\\\           \/\\\      /\\\/////////\\\   /\\\/  \///\\\        
            \/\\\           \/\\\     \/\\\       \/\\\  /\\\      \//\\\      
             \/\\\           \/\\\     \/\\\\\\\\\\\\\\\ \/\\\       \/\\\     
              \/\\\           \/\\\     \/\\\/////////\\\ \//\\\      /\\\     
               \/\\\           \/\\\     \/\\\       \/\\\  \///\\\  /\\\      
                \/\\\        /\\\\\\\\\\\ \/\\\       \/\\\    \///\\\\\/      
                 \///        \///////////  \///        \///       \/////       

-->
</head>
<body>
  <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

  <div class="container">
    <div class="header clearfix">
      <nav><ul class="nav nav-pills pull-right">
<li>
<a href="../../">About</a>
                </li>
<li>
<a href="../../projects/">Projects</a>
                </li>
<li>
<a href="../../posts/">Posts</a>
                </li>
<li>
<a href="../../archive.html">Archive</a>

          
        </li>
</ul></nav><a href="http://louistiao.me/">

        <h3 class="text-muted">
          <span id="blog-title">Louis Tiao</span>
        </h3>
      </a>
    </div>

<!-- TODO Figure out what to do with this stuff -->
<!--     <div class="row">

      <ul class="nav nav-pills pull-right">
          
      </ul>
    </div> -->

    <div id="content" role="main">
      <div class="body-content">
        <!--Body content-->
        <div class="row">
          
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../../posts/setting-up-a-ipython-parallel-cluster-on-amazon-ec2-with-starcluster/" class="u-url">Setting up a IPython Parallel Cluster on Amazon EC2 with StarCluster</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Louis Tiao
            </span></p>
            <p class="dateline"><a href="../../posts/setting-up-a-ipython-parallel-cluster-on-amazon-ec2-with-starcluster/" rel="bookmark"><time class="published dt-published" datetime="2016-05-03T22:55:55+10:00" title="2016-05-03 22:55">2016-05-03 22:55</time></a></p>
                <p class="commentline">            <a href="../../posts/setting-up-a-ipython-parallel-cluster-on-amazon-ec2-with-starcluster/#disqus_thread" data-disqus-identifier="cache/posts/setting-up-a-ipython-parallel-cluster-on-amazon-ec2-with-starcluster.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p><a class="reference external" href="http://star.mit.edu/cluster/">StarCluster</a> is an open source cluster-computing toolkit for Amazon’s Elastic
Compute Cloud (EC2) that is designed to automate and simplify the process of
building, configuring, and managing clusters of virtual machines on Amazon’s
EC2 cloud. StarCluster makes it easy to create a cluster computing environment
in the cloud for distributed and parallel computing applications.</p>
<p class="more"><a href="../../posts/setting-up-a-ipython-parallel-cluster-on-amazon-ec2-with-starcluster/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../../posts/notebooks/visualizing-and-animating-optimization-algorithms-with-matplotlib/" class="u-url">Visualizing and Animating Optimization Algorithms with Matplotlib</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Louis Tiao
            </span></p>
            <p class="dateline"><a href="../../posts/notebooks/visualizing-and-animating-optimization-algorithms-with-matplotlib/" rel="bookmark"><time class="published dt-published" datetime="2016-04-26T22:13:17+10:00" title="2016-04-26 22:13">2016-04-26 22:13</time></a></p>
                <p class="commentline">            <a href="../../posts/notebooks/visualizing-and-animating-optimization-algorithms-with-matplotlib/#disqus_thread" data-disqus-identifier="cache/posts/notebooks/visualizing-and-animating-optimization-algorithms-with-matplotlib.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In this series of notebooks, we demonstrate some useful patterns and recipes for visualizing animating optimization algorithms using Matplotlib.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">autograd.numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="k">import</span> <span class="n">Axes3D</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="k">import</span> <span class="n">LogNorm</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">animation</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="k">import</span> <span class="n">HTML</span>

<span class="kn">from</span> <span class="nn">autograd</span> <span class="k">import</span> <span class="n">elementwise_grad</span><span class="p">,</span> <span class="n">value_and_grad</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="k">import</span> <span class="n">minimize</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="n">zip_longest</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">partial</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We shall restrict our attention to 3-dimensional problems for right now (i.e. optimizing over only 2 parameters), though what follows can be extended to higher dimensions by plotting all pairs of parameters against each other, effectively projecting the problem to 3-dimensions.</p>
<p>The Wikipedia article on <a href="https://en.wikipedia.org/wiki/Test_functions_for_optimization">Test functions for optimization</a> has a few functions that are useful for evaluating optimization algorithms. In particular, we shall look at <strong>Beale's function</strong>:</p>
$$
f(x, y) = (1.5 - x + xy)^2 + (2.25 - x + xy^2)^2 + (2.625 - x + xy^3)^2
$$
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">f</span>  <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.5</span> <span class="o">-</span> <span class="n">x</span> <span class="o">+</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mf">2.25</span> <span class="o">-</span> <span class="n">x</span> <span class="o">+</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mf">2.625</span> <span class="o">-</span> <span class="n">x</span> <span class="o">+</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p class="more"><a href="../../posts/notebooks/visualizing-and-animating-optimization-algorithms-with-matplotlib/">Read more…</a></p>
</div>
</div>
</div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../../posts/installing-cartopy-on-mac-osx-1011/" class="u-url">Installing Cartopy on Mac OSX (10.11)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Louis Tiao
            </span></p>
            <p class="dateline"><a href="../../posts/installing-cartopy-on-mac-osx-1011/" rel="bookmark"><time class="published dt-published" datetime="2016-03-31T23:33:50+11:00" title="2016-03-31 23:33">2016-03-31 23:33</time></a></p>
                <p class="commentline">            <a href="../../posts/installing-cartopy-on-mac-osx-1011/#disqus_thread" data-disqus-identifier="cache/posts/installing-cartopy-on-mac-osx-1011.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>So you develop on Mac OS X (10.11) and have installed the external
dependencies (<a class="reference external" href="https://trac.osgeo.org/geos/">geos</a> 3.5.0, <a class="reference external" href="https://trac.osgeo.org/proj/">proj</a> 4.9.2) of <a class="reference external" href="http://scitools.org.uk/cartopy/">Cartopy</a> with <a class="reference external" href="http://brew.sh/">Homebrew</a>:</p>
<pre class="code console"><a name="rest_code_ac217c42d24b48059e6991cd9e8fff5d-1"></a><span class="gp">$</span> brew install geos
<a name="rest_code_ac217c42d24b48059e6991cd9e8fff5d-2"></a><span class="gp">$</span> brew install proj
</pre>
<p>Moreover, you have created a <tt class="docutils literal">virtualenv</tt> and installed the Python
dependencies (Cython, NumPy):</p>
<pre class="code console"><a name="rest_code_22721f3e97814689aedc36be7f75f49b-1"></a><span class="gp">$</span> mkvirtualenv cartopy_venv
<a name="rest_code_22721f3e97814689aedc36be7f75f49b-2"></a><span class="gp">(cartopy_venv)$</span> pip install cython
<a name="rest_code_22721f3e97814689aedc36be7f75f49b-3"></a><span class="gp">(cartopy_venv)$</span> pip install numpy
</pre>
<p>Yet, when you finally go install Cartopy, you still encounter the following
seemingly inexplicable error:</p>
<pre class="code console"><a name="rest_code_04af11a5cf234e2693f7563d6b87a04e-1"></a><span class="gp">(cartopy_venv)$</span> pip install cartopy
<a name="rest_code_04af11a5cf234e2693f7563d6b87a04e-2"></a><span class="go">[...]</span>
<a name="rest_code_04af11a5cf234e2693f7563d6b87a04e-3"></a><span class="go">clang -fno-strict-aliasing -fno-common -dynamic -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Tk.framework/Versions/8.5/Headers -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/include -I./lib/cartopy -I-I/usr/local/Cellar/proj/4.9.2/include -I/usr/local/Cellar/geos/3.5.0/include -I/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c lib/cartopy/trace.cpp -o build/temp.macosx-10.11-x86_64-2.7/lib/cartopy/trace.o</span>
<a name="rest_code_04af11a5cf234e2693f7563d6b87a04e-4"></a><span class="go">lib/cartopy/trace.cpp:249:10: fatal error: 'proj_api.h' file not found</span>
<a name="rest_code_04af11a5cf234e2693f7563d6b87a04e-5"></a><span class="gp">#</span>include <span class="s2">"proj_api.h"</span>
<a name="rest_code_04af11a5cf234e2693f7563d6b87a04e-6"></a><span class="go">         ^</span>
<a name="rest_code_04af11a5cf234e2693f7563d6b87a04e-7"></a><span class="go">1 error generated.</span>
<a name="rest_code_04af11a5cf234e2693f7563d6b87a04e-8"></a><span class="go">error: command 'clang' failed with exit status 1</span>
<a name="rest_code_04af11a5cf234e2693f7563d6b87a04e-9"></a>
<a name="rest_code_04af11a5cf234e2693f7563d6b87a04e-10"></a><span class="go">----------------------------------------</span>
</pre>
<p class="more"><a href="../../posts/installing-cartopy-on-mac-osx-1011/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../../posts/workflow-for-keeping-nikola-config-file-updated/" class="u-url">Workflow for keeping Nikola config file updated</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Louis Tiao
            </span></p>
            <p class="dateline"><a href="../../posts/workflow-for-keeping-nikola-config-file-updated/" rel="bookmark"><time class="published dt-published" datetime="2016-03-29T11:13:12+11:00" title="2016-03-29 11:13">2016-03-29 11:13</time></a></p>
                <p class="commentline">            <a href="../../posts/workflow-for-keeping-nikola-config-file-updated/#disqus_thread" data-disqus-identifier="cache/posts/workflow-for-keeping-nikola-config-file-updated.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>For most, keeping Nikola up-to-date is usually a simple matter of running
something like:</p>
<pre class="code console"><a name="rest_code_880ba9d3cf3d49a3b89c020df1832f51-1"></a><span class="gp">$</span> pip install --upgrade nikola
</pre>
<p>The same goes for its dependencies. However, one important thing that can get
overlooked is the Nikola configuration file for your site (the <tt class="docutils literal">conf.py</tt> file
sitting at the root of your Nikola site directory), which is almost always
updated with each major Nikola release.</p>
<p class="more"><a href="../../posts/workflow-for-keeping-nikola-config-file-updated/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../../posts/creating-custom-unix-fortunes/" class="u-url">Creating custom (Unix) fortunes</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Louis Tiao
            </span></p>
            <p class="dateline"><a href="../../posts/creating-custom-unix-fortunes/" rel="bookmark"><time class="published dt-published" datetime="2016-02-18T01:15:42+11:00" title="2016-02-18 01:15">2016-02-18 01:15</time></a></p>
                <p class="commentline">            <a href="../../posts/creating-custom-unix-fortunes/#disqus_thread" data-disqus-identifier="cache/posts/creating-custom-unix-fortunes.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Like others, I include <tt class="docutils literal">fortune</tt> in my <tt class="docutils literal">.bash_profile</tt> so that I am
greeted with a random, witty and thought-provoking epigram upon starting a
new shell session. Eventually, however, I found most of the epigrams to be
mostly trite and vapid, and quickly grew tired of them. Instead of tinkering
with the probabilities of sampling from the various datafiles available, I
decided to roll with my own epigram datafile.</p>
<p class="more"><a href="../../posts/creating-custom-unix-fortunes/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../../posts/louis-does-dotfiles/" class="u-url">Louis does dotfiles</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Louis Tiao
            </span></p>
            <p class="dateline"><a href="../../posts/louis-does-dotfiles/" rel="bookmark"><time class="published dt-published" datetime="2016-02-12T22:59:46+11:00" title="2016-02-12 22:59">2016-02-12 22:59</time></a></p>
                <p class="commentline">            <a href="../../posts/louis-does-dotfiles/#disqus_thread" data-disqus-identifier="cache/posts/louis-does-dotfiles.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<a class="reference external image-reference" href="../../images/bash.png"><img alt="../../images/bash.thumbnail.png" class="align-center" src="../../images/bash.thumbnail.png"></a>
<p>For a long time, I kept a small set of minimalistic dotfiles
(<tt class="docutils literal">.bash_profile</tt>, <tt class="docutils literal">.gitconfig</tt>, <tt class="docutils literal">.vimrc</tt>). You probably couldn't find
anything in my <tt class="docutils literal">.bash_profile</tt> other than exports and path definitions that
were absolutely necessary to get tools such as <a class="reference external" href="http://brew.sh/">Homebrew</a> and
<a class="reference external" href="https://virtualenvwrapper.readthedocs.org/en/latest/">virtualenvwrapper</a> to work. Furthermore, I was dismissive towards spending
any significant amount of time down the rabbit hole of perpetual dotfile
customization and optimization.</p>
<p>Recently, while digging through my bookmarks saved from months ago, I came
across <a class="reference external" href="https://dotfiles.github.io/">GitHub does dotfiles</a>. Needless to say, after perusing through some
of the most popular dotfiles, dotfile utilities and tutorials, I came away
quite impressed. It disabused me of my previous misbelief that dotfile
calibration is ultimately a fruitless and ceaseless task, and I decided to
give it another shot.</p>
<p class="more"><a href="../../posts/louis-does-dotfiles/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../../posts/adding-__name__-and-__doc__-attributes-to-functoolspartial-objects/" class="u-url">Adding __name__ and __doc__ attributes to functools.partial objects</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Louis Tiao
            </span></p>
            <p class="dateline"><a href="../../posts/adding-__name__-and-__doc__-attributes-to-functoolspartial-objects/" rel="bookmark"><time class="published dt-published" datetime="2016-02-08T14:42:56+11:00" title="2016-02-08 14:42">2016-02-08 14:42</time></a></p>
                <p class="commentline">            <a href="../../posts/adding-__name__-and-__doc__-attributes-to-functoolspartial-objects/#disqus_thread" data-disqus-identifier="cache/posts/adding-__name__-and-__doc__-attributes-to-functoolspartial-objects.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>The <a class="reference external" href="https://docs.python.org/2/library/functools.html#functools.partial">partial</a> function from the <a class="reference external" href="https://docs.python.org/2/library/functools.html">functools</a> library is useful for performing
partial function application in Python. There are plenty of guides and
resources on functional programming in Python and this post assumes a reasonable
degree of proficiency with both.</p>
<p class="more"><a href="../../posts/adding-__name__-and-__doc__-attributes-to-functoolspartial-objects/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../../posts/using-the-matplotlib-plot-directive-in-nikola/" class="u-url">Using the Matplotlib plot directive in Nikola</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Louis Tiao
            </span></p>
            <p class="dateline"><a href="../../posts/using-the-matplotlib-plot-directive-in-nikola/" rel="bookmark"><time class="published dt-published" datetime="2016-02-02T22:58:11+11:00" title="2016-02-02 22:58">2016-02-02 22:58</time></a></p>
                <p class="commentline">            <a href="../../posts/using-the-matplotlib-plot-directive-in-nikola/#disqus_thread" data-disqus-identifier="cache/posts/using-the-matplotlib-plot-directive-in-nikola.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Matplotlib's <a class="reference external" href="http://matplotlib.org/1.5.1/devel/documenting_mpl.html?highlight=directive#module-matplotlib.sphinxext.plot_directive">plot directive</a> is an immensely useful <a class="reference external" href="http://www.sphinx-doc.org/en/stable/extensions.html">Sphinx extension</a> for
easily embedding plots within your documentation. It allows you to include
source code for generating a matplotlib plot, either inline or by providing
the path to a source file. By default, the HTML documentation that is
generated will display a PNG of the plot, and also provide links to the source
code for generating the plot, a high-resolution PNG, and also a vector graphic
(PDF).</p>
<p class="more"><a href="../../posts/using-the-matplotlib-plot-directive-in-nikola/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../../posts/python-simplehttpserver-recipe-serve-specific-directory/" class="u-url">Python SimpleHTTPServer Recipe: Serve specific directory</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Louis Tiao
            </span></p>
            <p class="dateline"><a href="../../posts/python-simplehttpserver-recipe-serve-specific-directory/" rel="bookmark"><time class="published dt-published" datetime="2015-12-10T17:38:27+11:00" title="2015-12-10 17:38">2015-12-10 17:38</time></a></p>
                <p class="commentline">            <a href="../../posts/python-simplehttpserver-recipe-serve-specific-directory/#disqus_thread" data-disqus-identifier="cache/posts/python-simplehttpserver-recipe-serve-specific-directory.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<ul class="simple">
<li>We need to be able to pass the path to the root of the directory tree we wish
to serve.</li>
<li>We can only pass arguments to the <tt class="docutils literal">ServerClass</tt> and not <tt class="docutils literal">HandlerClass</tt>.
Note however that <tt class="docutils literal">HandlerClass</tt> is passed as an argument to <tt class="docutils literal">ServerClass</tt>
so we should be able to propagate the argument to <tt class="docutils literal">HandlerClass</tt>.</li>
<li>The <tt class="docutils literal">translate_path</tt> method of <tt class="docutils literal">SimpleHTTPRequestHandler</tt> takes the
<tt class="docutils literal">/</tt>-separated path specified in the URL and prepends <tt class="docutils literal">os.getcwd()</tt> to it.
We just have to instead prepend the  argument we propagated to
<tt class="docutils literal">SimpleHTTPRequestHandler</tt>.</li>
<li>Lastly we modify the <tt class="docutils literal">test</tt> function to take multiple optional arguments
(port and base path) using the excellent module <tt class="docutils literal">argparse</tt>.</li>
</ul>
<p class="more"><a href="../../posts/python-simplehttpserver-recipe-serve-specific-directory/">Read more…</a></p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../../posts/python-simplehttpserver-recipe-enable-cors/" class="u-url">Python SimpleHTTPServer Recipe: Enable CORS</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Louis Tiao
            </span></p>
            <p class="dateline"><a href="../../posts/python-simplehttpserver-recipe-enable-cors/" rel="bookmark"><time class="published dt-published" datetime="2015-12-10T15:56:08+11:00" title="2015-12-10 15:56">2015-12-10 15:56</time></a></p>
                <p class="commentline">            <a href="../../posts/python-simplehttpserver-recipe-enable-cors/#disqus_thread" data-disqus-identifier="cache/posts/python-simplehttpserver-recipe-enable-cors.html">Comments</a>


        </p>
</div>
    </header><div class="p-summary entry-summary">
    <div>
<p>Create a file, let's call it <tt class="docutils literal">cors_http_server.py</tt>, with the code below:</p>
<pre class="code python"><a name="rest_code_e7254b3c447b4070956feff1ceab9974-1"></a><span class="ch">#! /usr/bin/env python</span>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-2"></a>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-3"></a><span class="kn">from</span> <span class="nn">SimpleHTTPServer</span> <span class="kn">import</span> <span class="n">SimpleHTTPRequestHandler</span><span class="p">,</span> <span class="n">test</span>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-4"></a>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-5"></a>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-6"></a><span class="k">class</span> <span class="nc">CORSHTTPRequestHandler</span><span class="p">(</span><span class="n">SimpleHTTPRequestHandler</span><span class="p">):</span>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-7"></a>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-8"></a>    <span class="k">def</span> <span class="nf">end_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_header</span><span class="p">(</span><span class="s1">'Access-Control-Allow-Origin'</span><span class="p">,</span> <span class="s1">'*'</span><span class="p">)</span>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-10"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">CORSHTTPRequestHandler</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">end_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-11"></a>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-12"></a><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
<a name="rest_code_e7254b3c447b4070956feff1ceab9974-13"></a>    <span class="n">test</span><span class="p">(</span><span class="n">HandlerClass</span><span class="o">=</span><span class="n">CORSHTTPRequestHandler</span><span class="p">)</span>
</pre>
<p class="more"><a href="../../posts/python-simplehttpserver-recipe-enable-cors/">Read more…</a></p>
</div>
    </div>
    </article>
</div>
        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-3.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="ltiao";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'center' to center equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script>
</div>
        <!--End of body content-->
        </div>
    </div>

    <footer id="footer" class="footer">
              Contents © 2016         <a href="mailto:louistiao@me.com">Louis Tiao</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
                  
    </footer>
</div> <!-- /container -->

            <script src="../../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43722566-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
